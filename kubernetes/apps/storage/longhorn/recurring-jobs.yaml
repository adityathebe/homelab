---
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: daily-backup
spec:
  cron: '0 1 * * *' # Daily at 1 AM Nepal Time
  task: backup
  groups:
    - r2
  retain: 6
  concurrency: 2
  parameters:
    full-backup-interval: '6'
  labels:
    kind: daily
---
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: weekly-backup
spec:
  cron: '0 2 * * 6' # Weekly at 2 AM Nepal Time on Sunday
  task: backup
  groups:
    - r2
  retain: 4
  concurrency: 2
  parameters:
    full-backup-interval: '4'
  labels:
    kind: weekly
---
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: monthly-backup
spec:
  cron: '0 3 1 * *' # Monthly at 3 AM Nepal Time on the 1st
  task: backup
  groups:
    - r2
  retain: 3
  concurrency: 2
  parameters:
    full-backup-interval: '3'
  labels:
    kind: monthly
---
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: snapshot
spec:
  cron: '0 */6 * * *'
  task: snapshot
  groups:
    - r2
  retain: 8
  concurrency: 2
  labels:
    kind: snapshot
---
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: fs-trim
spec:
  cron: '0 4,16 * * *' # Twice daily at 4 AM and 4 PM Nepal Time
  task: filesystem-trim
  groups:
    - r2
    - default
  concurrency: 2